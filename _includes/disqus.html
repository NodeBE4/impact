{% if page.comments %}
{% if site.disqus %}

<div class="comments">
	<div id="disqus_thread"></div>
		<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

		var disqus_config = function () {
			this.page.url = "{{ site.url }}{{ page.url }}";  // Replace PAGE_URL with your page's canonical URL variable
			this.page.identifier = "{{ page.url }}"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
		};

		(function() { // DON'T EDIT BELOW THIS LINE
			var d = document, s = d.createElement('script');
			s.src = 'https://{{ site.disqus }}/embed.js';
			s.setAttribute('data-timestamp', +new Date());
			(d.head || d.body).appendChild(s);
		})();
		</script>
	<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

</div>
{% endif %}

{% if site.intensedebate %}
	<script>
	var idcomments_acct = '{{ site.intensedebate }}';
	var idcomments_post_id = '{{ page.url }}';
	var idcomments_post_url = '{{ site.url}}{{ page.url }}';
	</script>
	<span id="IDCommentsPostTitle" style="display:none"></span>
	<script type='text/javascript' src='https://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>
{% endif %}

{% if site.gitalk %}
	<div id="gitalk-container"></div>

	<script src="{{ site.url}}{{ site.baseurl }}/assets/js/gitalk.min.js"></script>
	<script src="{{ site.url}}{{ site.baseurl }}/assets/js/md5.min.js"></script>

  <script type="text/javascript">
		const gitalk = new Gitalk({
		  clientID: '{{ site.gitalk.clientID }}',
		  clientSecret: '{{ site.gitalk.clientSecret }}',
		  repo: '{{ site.gitalk.repo }}',
		  owner: '{{ site.gitalk.owner }}',
		  admin: [{% for admin in site.gitalk.admin %}'{{ admin }}',{% endfor %}],
		  id: md5('{{ page.url }}'),      // Ensure uniqueness and length less than 50
		  distractionFreeMode: false,  // Facebook-like distraction free mode
			language: 'zh-CN',
			pagerDirection: 'first',
			perPage: 50,
		})

		gitalk.render('gitalk-container')
	</script>
{% endif %}


{% endif %}
